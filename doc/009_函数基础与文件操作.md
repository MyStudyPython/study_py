æœ¬ç« å°†ä¼šè¿›å…¥å‡½æ•°çš„å­¦ä¹ ï¼Œåœ¨æ·±å…¥å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ

# 1 å‡½æ•°ç®€ä»‹ {#1-å‡½æ•°ç®€ä»‹}

åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ˜¯åœ¨ä¸€ä¸ª.pyæ–‡ä»¶å†…éƒ¨ï¼Œæ ¹æ®ä»£ç çš„æ‰§è¡Œé€»è¾‘ï¼Œä¸€æ­¥ä¸€æ­¥çš„å°†ä»£ç è¿›è¡Œç¼–å†™ï¼Œä½†æ˜¯è¿™å°±ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚

``` python
# æ ¼å¼åŒ–è¾“å‡ºä¸ªäººä¿¡æ¯
name = "kinght"
age = 20
sex = "man"
print("username = {} \nage = {} \nsex = {}".format(name,age,sex))

name = "aym"
age = 18
sex = "woman"
print("username = {} \nage = {} \nsex = {}".format(name,age,sex))
```

æŒ‰ç…§ä¹‹å‰çš„æ–¹å¼è¿›è¡Œè¾“å‡ºï¼Œæˆ‘ä»¬éœ€è¦æœ‰å¤šå°‘äººå°±è¿™æ ·è¾“å‡ºä¸€æ¬¡ï¼Œä¸¤ä¸ªäººè¿˜å¥½ï¼Œå¦‚æœå‡ ç™¾ä¸ªäººï¼Œé‚£ä¹ˆä»£ç é‡å°±å¤ªè¿‡åºå¤§äº†ã€‚

äºæ˜¯ä¹ï¼Œå°±æœ‰äº†å‡½æ•°çš„æ¦‚å¿µï¼š

``` python
def user(username,userage,usersex):
    name = username
    age = userage
    sex = usersex
    print("username = {} \nage = {} \nsex = {}".format(name,age,sex))

# è°ƒç”¨å‡½æ•°
user("kinght",20,"man")
user("aym",18,"woman")
```

æˆ‘ä»¬ä½¿ç”¨defå¯¹å†…éƒ¨çš„æ“ä½œè¿›è¡Œæ‰“åŒ…æˆuserå‡½æ•°ï¼Œå¹¶ä¸”userå‡½æ•°æ¥å—username,userage,usersexçš„å‚æ•°è¿›è¡Œä¼ å…¥ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨`å‡½æ•°å(å‚æ•°)`çš„å½¢å¼è¿›è¡Œè°ƒç”¨ï¼Œå°±è¾“å‡ºäº†æˆ‘ä»¬éœ€è¦çš„æ ¼å¼ã€‚

å°±ç›¸å½“äºæ‰¾äº†ä¸€ä¸ªä»£å·¥çš„äººï¼Œå°†æ“ä½œæ–¹æ³•æ•™ä¼šäº†å®ƒä¹‹åï¼Œåªç”¨æŠŠåŸææ–™ç»™ä»–å°±å¯ä»¥äº†ã€‚

æ‰€ä»¥æ€»ç»“èµ·æ¥ï¼Œå‡½æ•°ï¼Œä¸€ä¸ªç”¨äºä¸“é—¨å®ç°æŸä¸ªåŠŸèƒ½çš„ä»£ç å—ï¼ˆå¯é‡ç”¨ï¼‰

## 1.1 å†…ç½®å‡½æ•° {#11-å†…ç½®å‡½æ•°}

pythonè§£é‡Šå™¨é»˜è®¤å†…ç½®äº†å¾ˆå¤šå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰å·²ç»ä½¿ç”¨è¿‡äº†å…¶ä¸­çš„ä¸€éƒ¨åˆ†

``` python
lenã€binã€octã€hex ç­‰
```

## 1.2 è‡ªå®šä¹‰å‡½æ•° {#12-è‡ªå®šä¹‰å‡½æ•°}

å¦‚ä¸Šè¯‰ä»£ç ï¼Œè¿™ä¸ªå‡½æ•°ä¸æ˜¯pythonå†…ç½®ï¼Œè€Œæ˜¯ç¨‹åºå‘˜è‡ªå·±ç¼–å†™çš„å‡½æ•°å«åšè‡ªå®šä¹‰å‡½æ•°

``` python
def send_eamil():
    pass
def send_wchat():
    pass

send_eamil()
send_wchat()
```

## 1.3 æ¨¡å— {#13-æ¨¡å—}

ä¾‹å¦‚ï¼šç°æœ‰ä¸¤ä¸ªæ–‡ä»¶`send.py`å’Œ`main.py`

Send.py

``` python
def send_mail():
    pass
def send_wchat():
    pass
```

Main.py

``` python
import send
send.send_mail()
send.send_wchat()
```

æˆ‘ä»¬å¯ä»¥å°†å‡½æ•°æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„.pyæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å°±è¢«ç§°ä¸ºæ¨¡å—ã€‚

åŒæ ·æ¨¡å—å¯ä»¥æ ¹æ®æ¥æºè¿›è¡Œåˆ†ç±»ï¼š

-   å†…ç½®æ¨¡å—ï¼Œpythonè§£é‡Šå™¨æä¾›çš„æ¨¡å—

``` python
import random
print(random.randint(0,100))
```

-   ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä»ç½‘ä¸Šä¸‹è½½åˆ«çš„ç¨‹åºå‘˜å†™çš„æ¨¡å—

-   è‡ªå®šä¹‰æ¨¡å—ï¼Œè‡ªå·±å†™çš„æ¨¡å—

# 2 æ–‡ä»¶æ“ä½œç›¸å…³ {#2-æ–‡ä»¶æ“ä½œç›¸å…³}

æ–‡ä»¶æ“ä½œéœ€è¦ä½¿ç”¨åˆ°å¾ˆå¤šçš„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶ä½œä¸ºå‡½æ•°å…¥é—¨è¿›è¡Œå­¦ä¹ 

åœ¨è¿›è¡Œå…·ä½“çš„æ–‡ä»¶æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç¼–ç å’Œç›¸å…³æ•°æ®ç±»å‹è¿›è¡Œå›é¡¾

-   å­—ç¬¦ä¸²ç±»å‹(str)ï¼Œåœ¨ç¨‹åºä¸­ç”¨äºè¡¨ç¤ºæ–‡å­—ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯unicodeç¼–ç çš„äºŒè¿›åˆ¶

-   å­—èŠ‚ç±»å‹(byte)

    -   å¯è¡¨ç¤ºæ–‡å­—ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯utf-8/gbkç­‰ç¼–ç çš„äºŒè¿›åˆ¶(å¯¹unicodeç¼–ç è¿›è¡Œå‹ç¼©ï¼Œæ–¹ä¾¿ä¼ è¾“)

    ``` python
    name = 'é©¬åŒ–è…¾'
    data = name.encode("utf-8")
    print(data) # b'\xe9\xa9\xac\xe5\x8c\x96\xe8\x85\xbe'
    rester = data.decode('utf-8')
    print(rester) # é©¬åŒ–è…¾
    ```

    -   å¯è¡¨ç¤ºåŸå§‹äºŒè¿›åˆ¶ï¼ˆå›¾ç‰‡ã€æ–‡ä»¶ç­‰ä¿¡æ¯ï¼‰

## 2.1 è¯»æ–‡ä»¶ {#21-è¯»æ–‡ä»¶}

è¯»å–æ–‡ä»¶åˆ†å‡ æ­¥ï¼Ÿå’ŒæŠŠå¤§è±¡è£…å†°ç®±ä¸€æ ·åˆ†ä¸‰æ­¥ï¼Œæ‰“å¼€æ–‡ä»¶ã€è¯»å–æ–‡ä»¶ã€å…³é—­æ–‡ä»¶ã€‚

### 2.1.1 è¯»å–æ–‡æœ¬æ–‡ä»¶ {#211-è¯»å–æ–‡æœ¬æ–‡ä»¶}

``` python
# 1.æ‰“å¼€æ–‡ä»¶
    # r = è¯»å–æ–‡ä»¶ b = äºŒè¿›åˆ¶å†…å®¹
file_object = open('123.txt',mode='rb')
# 2.è¯»å–æ–‡ä»¶
	# .read() è¯»å–æ‰€æœ‰çš„æ–‡ä»¶å†…å®¹ï¼Œèµ‹å€¼ç»™data
data = file_object.read()
# 3.å…³é—­æ–‡ä»¶
file_object.close()

print(data)
# å­—èŠ‚ç±»å‹
# b'12312312\n231241241\n123124124\n21312341'
text = data.decode("utf-8") # å­—èŠ‚è½¬å­—ç¬¦ä¸²
print(text)
'''
è¾“å‡ºç»“æœ
12312312
231241241
123124124
21312341
'''
```

> åœ¨[æ–‡ä»¶](https://baike.baidu.com/item/%E6%96%87%E4%BB%B6/24602116){target="_blank"
> rel="noopener"}[I/O](https://baike.baidu.com/item/I%2FO/84718){target="_blank"
> rel="noopener"}ä¸­ï¼Œè¦ä»ä¸€ä¸ªæ–‡ä»¶è¯»å–æ•°æ®ï¼Œåº”ç”¨ç¨‹åºé¦–å…ˆè¦è°ƒç”¨æ“ä½œ[ç³»ç»Ÿå‡½æ•°](https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0/224568){target="_blank"
> rel="noopener"}å¹¶ä¼ é€æ–‡ä»¶åï¼Œå¹¶é€‰ä¸€ä¸ªåˆ°è¯¥æ–‡ä»¶çš„è·¯å¾„æ¥æ‰“å¼€æ–‡ä»¶ã€‚è¯¥å‡½æ•°å–å›ä¸€ä¸ªé¡ºåºå·ï¼Œå³æ–‡ä»¶å¥æŸ„ï¼ˆfile
> handleï¼‰ï¼Œè¯¥æ–‡ä»¶[å¥æŸ„](https://baike.baidu.com/item/%E5%8F%A5%E6%9F%84/3527587){target="_blank"
> rel="noopener"}å¯¹äºæ‰“å¼€çš„æ–‡ä»¶æ˜¯å”¯ä¸€çš„è¯†åˆ«ä¾æ®ã€‚è¦ä»æ–‡ä»¶ä¸­è¯»å–ä¸€å—æ•°æ®ï¼Œåº”ç”¨ç¨‹åºéœ€è¦è°ƒç”¨å‡½æ•°ReadFileï¼Œå¹¶å°†æ–‡ä»¶å¥æŸ„åœ¨å†…å­˜ä¸­çš„åœ°å€å’Œè¦æ‹·è´çš„å­—èŠ‚æ•°ä¼ é€ç»™æ“ä½œç³»ç»Ÿã€‚å½“å®Œæˆä»»åŠ¡åï¼Œå†é€šè¿‡è°ƒç”¨ç³»ç»Ÿå‡½æ•°æ¥å…³é—­è¯¥æ–‡ä»¶ã€‚

è¡¥å……çŸ¥è¯†ï¼š

-   ç›¸å¯¹è·¯å¾„

    -   ç›¸å¯¹äºä½¿ç”¨æ–‡ä»¶è€Œè¨€çš„è·¯å¾„

        ``` python
        /tmp/code/pythonæ–‡ä»¶å¤¹
        	duqu.py
          123.txt
        /tmp/code/javaæ–‡ä»¶å¤¹
        	111.txt
        å¯¹äºduqu.pyçš„ç›¸å¯¹è·¯å¾„
        123.txt -> 123.txt(ç›¸åŒæ–‡ä»¶å¤¹ç›´æ¥å†™æ–‡ä»¶åå³å¯)
        111.txt -> ../java/111/txt(ç›¸å¯¹duqu.pyåœ¨å¦ä¸€ä¸ªä¸Šçº§æ–‡ä»¶é˜¿å‰ï¼Œæ‰€ä»¥éœ€è¦å…ˆå›åˆ°ä¸Šçº§ç›®å½•../ï¼Œç„¶ååœ¨è¿›å…¥å¯¹åº”æ–‡ä»¶å¤¹æ‰¾åˆ°ç›®å½•111.txt)
        ```

-   ç»å¯¹è·¯å¾„

    -   å¯¹äºç³»ç»Ÿç›®å½•è€Œè¨€çš„è·¯å¾„

        ``` python
        /tmp/code/pythonæ–‡ä»¶å¤¹
        	duqu.py
          123.txt
        /tmp/code/javaæ–‡ä»¶å¤¹
        	111.txt
        å¯¹äºduqu.pyçš„ç»å¯¹è·¯å¾„
        123.txt -> /tmp/code/python/123.txt
        111.txt -> /tmp/code/java/111.txt
        ```

æ¯æ¬¡è¯»å–æ–‡ä»¶éƒ½éœ€è¦`decode`æœªå…æ˜¾å¾—å¤ªè¿‡éº»çƒ¦ï¼Œæ‰€ä»¥å…¶å®å¯ä»¥ç›´æ¥ç”¨`rt`æ¨¡å¼

``` python
# rè¯»å–ï¼Œtæ–‡æœ¬å†…å®¹ã€‚ encoding="utf-8" ç¼–ç æˆutf-8
file_object = open('123.txt',mode='rt',encoding="utf-8")
data = file_object.read()
file_object.close()
print(data)
```

### 2.1.2 è¯»å–å›¾ç‰‡ç­‰éæ–‡æœ¬å†…å®¹æ–‡ä»¶ {#212-è¯»å–å›¾ç‰‡ç­‰éæ–‡æœ¬å†…å®¹æ–‡ä»¶}

``` python
file_object = open('123.jpeg',mode='rb')
data = file_object.read()
file_object.close()
print(data)
# å›¾ç‰‡ç­‰åŸå§‹äºŒè¿›åˆ¶å†…å®¹
# b'\xff\xd8\xff\xe0\x00\x10JFIF\x00\...åç»­å†…å®¹çœç•¥
```

### 2.1.3 è¯»æ–‡ä»¶æ³¨æ„äº‹é¡¹ {#213-è¯»æ–‡ä»¶æ³¨æ„äº‹é¡¹}

-   è·¯å¾„

    -   ç›¸å¯¹è·¯å¾„

        -   è¦æ˜ç™½ç°åœ¨çš„ç¨‹åºè¿è¡Œè·¯å¾„

        ``` bash
        ä½¿ç”¨ç»ˆç«¯è¿è¡Œçš„æ—¶å€™
        python3 /Users/kinght/code/python/lufei/hanshu
        ç¨‹åºå†…çš„ç›¸å¯¹åœ°å€ä¹Ÿæ˜¯å½“å‰è¿è¡Œè·¯å¾„(pwd)ä¸ºåŸºå‡†ï¼Œè€Œä¸æ˜¯ä»¥ç¨‹åºæ–‡ä»¶åœ°å€ä¸ºåŸºå‡†

        Traceback (most recent call last):
          File "/Users/kinght/code/python/lufei/hanshu/day7/4/rtduwenjian.py", line 1, in <module>
            file_object = open('123.txt',mode='rt',encoding="utf-8")
        FileNotFoundError: [Errno 2] No such file or directory: '123.txt'
        ```

    -   ç»å¯¹è·¯å¾„

    ``` python
    # ä¿®æ”¹ä»£ç ä½¿ç”¨ç»å¯¹è·¯å¾„
    file_object = open('/Users/kinght/code/python/lufei/hanshu/day7/4/123.txt',mode='rb')

    # è¿è¡Œä»£ç 
    python3 /Users/kinght/code/python/lufei/hanshu/day7/4/rtduwenjian.py
    ```

    å°±ä¸ä¼šå‡ºç°æŠ¥é”™

    ![image-20211201150900637](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/image-20211201150900637.png){loading="lazy"}

    è¿™é‡Œéœ€è¦æ³¨æ„ï¼šwindowsçš„è·¯å¾„`c:\new\windows\123.txt`å¯èƒ½ä¼šå¯¼è‡´`\+n = \n`çš„æƒ…å†µå‡ºç°ï¼Œå˜æˆè½¬ä¹‰ç¬¦å·

    ``` python
    # è§£å†³æ–¹æ¡ˆ1 -> å…ˆä¸€æ­¥ä½¿ç”¨è½¬ä¹‰ç¬¦å· è½¬ä¹‰æˆ\:
    file_object = open('c:\\new\\windows\\123.txt',mode='rb')
    # è§£å†³æ–¹æ¡ˆ2 -> ä½¿ç”¨rä½¿å…¶ä¸è½¬ä¹‰:
    file_object = open(r'c:\new\windows\123.txt',mode='rb')
    ```

-   è¯»æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨ä¼šæŠ¥é”™

    ``` python
    file_object = open('1234.txt',mode='rt',encoding="utf-8")
    data = file_object.read()
    file_object.close()
    print(data)

    # æŠ¥é”™
    Traceback (most recent call last):
      File "/Users/yangzhichao/code/python/lufei/hanshu/day7/4/rtduwenjian.py", line 1, in <module>
        file_object = open('1234.txt',mode='rt',encoding="utf-8")
    FileNotFoundError: [Errno 2] No such file or directory: '1234.txt'
    ```

    åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨

    ``` python
    import os
    exists = os.path.exists("1234.txt")
    print(exists) # å­˜åœ¨è¿”å›True ä¸å­˜åœ¨è¿”å›False
    ```

## 2.2 å†™æ–‡ä»¶ {#22-å†™æ–‡ä»¶}

### 2.2.1 å†™å…¥æ–‡æœ¬æ–‡ä»¶ {#221-å†™å…¥æ–‡æœ¬æ–‡ä»¶}

``` python
# 1.æ‰“å¼€æ–‡ä»¶
    # ä½¿ç”¨wb,wå†™å…¥bå­—èŠ‚ç±»å‹ -> ä¼šè¦æ±‚å†™å…¥æ—¶æ˜¯å­—èŠ‚ç±»å‹
file_object = open('111.txt', mode='wb')
# 2.å†™å…¥å†…å®¹ -> writeå°±æ˜¯å†™å…¥
file_object.write("ç‹—ç­–åˆ’ï¼é€€é’±".encode("utf-8"))
# 3.å…³é—­æ–‡ä»¶
file_object.close()
```

ç„¶åè¿è¡Œæ–‡ä»¶ï¼Œä¼šå‘ç°åœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆäº†

![æˆªå±2021-12-01
ä¸‹åˆ4.29.56](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/%E6%88%AA%E5%B1%8F2021-12-01%20%E4%B8%8B%E5%8D%884.29.56.png){loading="lazy"}

åŒæ ·çš„å¯ä»¥ä½¿ç”¨`wt`æ¨¡å¼ï¼Œçœç•¥ç¼–ç è¿‡ç¨‹

``` python
# 1.æ‰“å¼€æ–‡ä»¶
    # ä½¿ç”¨wb,wå†™å…¥tæ–‡æœ¬ç±»å‹
file_object = open('111.txt', mode='wt',encoding='utf-8')
# 2.å†™å…¥å†…å®¹
file_object.write("ç‹—ç­–åˆ’!é€€é’±")
# 3.å…³é—­æ–‡ä»¶
file_object.close()
```

### 2.2.2 å†™å…¥éæ–‡æœ¬æ–‡ä»¶ {#222-å†™å…¥éæ–‡æœ¬æ–‡ä»¶}

ç”±äºéæ–‡æœ¬æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªä¸ªå­—èŠ‚ç»„æˆçš„ï¼Œå›¾ç‰‡å…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªç‚¹åƒç´ ç‚¹ä¿¡æ¯ï¼Œæ‰€ä»¥è¿™é‡Œé‡‡å–å…ˆå¤åˆ¶ï¼Œåœ¨å†™å…¥çš„æ–¹å¼è¿›è¡Œ

``` python
# è¯»å–å›¾ç‰‡ä¿¡æ¯
f1 = open("123.png",mode='rb')
data = f1.read()
f1.close()

# å†™å…¥å›¾ç‰‡ä¿¡æ¯
f2 = open("222.png",mode='wb')
f2.write(data)
f2.close()
```

![image-20211201164956067](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/image-20211201164956067.png){loading="lazy"}

æ³¨æ„ï¼šä½¿ç”¨wæ‰“å¼€æ–‡ä»¶å¥æŸ„çš„æ—¶å€™ï¼Œä¼šå°†æ–‡ä»¶æ¸…ç©ºï¼

``` python
# æ¡ˆä¾‹ - å¤šç”¨æˆ·æ³¨å†Œ
user_file = open("user.txt",mode='wt',encoding='utf-8') # ä¸ºäº†å¯ä»¥è¿ç»­å†™å…¥ï¼Œå°†æ–‡ä»¶æ‰“å¼€æ”¾äºå¾ªç¯ä¹‹å¤–
while True:
    print("æ³¨å†Œ(è¾“å…¥Qç»“æŸ)".center(21,"*"))
    user = input("è¯·è¾“å…¥ç”¨æˆ·å:")
    if user.upper() == 'Q':
        break
    passwd = input("è¯·è¾“å…¥å¯†ç :")
    data = "{}-{}\n".format(user,passwd) # \næ˜¯ä¸ºäº†æ¢è¡Œ

    # user_file = open("user.txt",mode='wb',encoding='utf-8')
    # æ¯æ¬¡æ‰“å¼€æ–‡ä»¶wbéƒ½ä¼šæ¸…ç©ºæ–‡ä»¶
    user_file.write(data)
user_file.close()
```

ä¸¾ä¸ªğŸŒ°ï¼š[https://kinghtxg.com/archives/python-cong-wang-luo-zhong-bao-cun-wen-jian-he-tu-pian-de-ji-chu](https://kinghtxg.com/archives/python-cong-wang-luo-zhong-bao-cun-wen-jian-he-tu-pian-de-ji-chu){target="_blank"
rel="noopener"}

### 2.2.3 å†™æ–‡ä»¶çš„æ³¨æ„äº‹é¡¹ {#223-å†™æ–‡ä»¶çš„æ³¨æ„äº‹é¡¹}

-   è·¯å¾„
    -   å†™æ–‡ä»¶åŒæ ·éµå¾ªç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„
-   å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œwæ¨¡å¼ä¼šåˆ›å»ºæ–‡ä»¶ï¼Œè€Œæ–‡ä»¶å­˜åœ¨æ—¶ï¼Œwæ¨¡å¼ä¼šæ¸…ç©ºæ–‡ä»¶åå†™å…¥å†…å®¹

## 2.3 æ–‡ä»¶æ“ä½œçš„æ‰“å¼€æ¨¡å¼ {#23-æ–‡ä»¶æ“ä½œçš„æ‰“å¼€æ¨¡å¼}

ä¸Šæ–‡æˆ‘ä»¬åŸºäºæ–‡ä»¶æ“ä½œåŸºæœ¬å®ç°äº†è¯»ã€å†™çš„åŠŸèƒ½ï¼Œå…¶ä¸­æ¶‰åŠçš„æ–‡ä»¶æ“ä½œæ¨¡å¼ï¼šrtã€rbã€wtã€wbï¼Œå…¶å®åœ¨æ–‡ä»¶æ“ä½œä¸­è¿˜æœ‰å…¶ä»–çš„å¾ˆå¤šæ¨¡å¼ã€‚

``` python
========= ===============================================================
Character Meaning
--------- ---------------------------------------------------------------
'r'       open for reading (default)
'w'       open for writing, truncating the file first
'x'       create a new file and open it for writing
'a'       open for writing, appending to the end of the file if it exists

'b'       binary mode
't'       text mode (default)

'+'       open a disk file for updating (reading and writing)

The default mode is 'rt' (open for reading text).
```

ä»¥ä¸Šæ—¶å®˜æ–¹å¯¹äºæ–‡ä»¶æ‰“å¼€æ¨¡å¼çš„ä»‹ç»ï¼Œæˆ‘ä»¬å°†å…¶åˆ†ä¸ºäº†ä¸‰ä¸ªéƒ¨åˆ†é˜…è¯»ã€‚

-   ç¬¬ä¸€éƒ¨åˆ† `r\w\x\a`
    -   `r`æ˜¯è¯»å–æ–‡ä»¶æ“ä½œ
    -   `w\x\a`æ˜¯å†™å…¥æ–‡ä»¶æ“ä½œ
        -   `w` -\> æ–‡ä»¶æ— è®ºæ˜¯å¦å­˜åœ¨ï¼Œéƒ½è¿›è¡Œæ¸…ç©ºåå†™å…¥
        -   `x`-\> æ–‡ä»¶ä¸å­˜åœ¨åˆ›å»ºå†™å…¥ï¼Œæ–‡ä»¶å­˜åœ¨å°±æŠ¥é”™
        -   `a`-\>æ‰“å¼€æ–‡ä»¶å¾€å°¾éƒ¨è¿›è¡Œè¿½åŠ ï¼Œä¸ä¼šæ¸…ç©ºæ–‡ä»¶
-   ç¬¬äºŒéƒ¨åˆ†`b\t`ï¼ŒæŒ‡å®šæ–‡æœ¬æ¨¡å¼è¿˜æ˜¯äºŒè¿›åˆ¶æ¨¡å¼
    -   `b`-\>å­—èŠ‚æ¨¡å¼ï¼Œåº•å±‚æ•°æ®æ—¶æ˜¯äºŒè¿›åˆ¶å½¢å¼å­˜åœ¨
    -   `t`-\>æ–‡æœ¬æ¨¡å¼ï¼Œéœ€è¦åæ–¹æ·»åŠ `encoding="ç¼–ç æ ¼å¼"`(ä¸æ·»åŠ ä¸ºç³»ç»Ÿé»˜è®¤å½“å‰æ–‡æ¡£æ ¼å¼)

å¸¸è§ç»„åˆï¼š

``` python
# åªè¯»æ¨¡å¼
r\rt\rb
## ræ¨¡å¼é»˜è®¤ == rt
## æ–‡ä»¶å­˜åœ¨å³å¯è¯»ï¼Œä¸å­˜åœ¨å³æŠ¥é”™

# åªå†™æ¨¡å¼
w\wt\wb
## wæ¨¡å¼é»˜è®¤ == wt
## æ–‡ä»¶å­˜åœ¨æ¸…ç©ºå†å†™ã€ä¸å­˜åœ¨åˆ›å»ºå†å†™
x\xt\xb
## xæ¨¡å¼é»˜è®¤ == xt
## æ–‡ä»¶å­˜åœ¨åˆ™æŠ¥é”™ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºå†å†™
a\at\ab
## aæ¨¡å¼é»˜è®¤ == at
## å­˜åœ¨å°±å°¾éƒ¨è¿½åŠ ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºå†å†™ï¼Œä¸ä¼šæ¸…ç©ºæ–‡ä»¶
```

-   ç¬¬ä¸‰éƒ¨åˆ†`+`ï¼Œå³å¯è¯»åˆå¯å†™ï¼Œä¸è¿‡ä¼šæ ¹æ®æ¨¡å¼ä¸åŒå¯¼è‡´å…‰æ ‡ä½ç½®ä¸åŒ

    -   r+ã€rt+ã€rb+ï¼Œæ–‡ä»¶éœ€è¦æå‰å­˜åœ¨ï¼Œé»˜è®¤å…‰æ ‡ä½ç½®ï¼šèµ·å§‹ä½ç½®

        ``` python
        file_object = open('demo1.txt', mode='rt+')
        # è¯»å–å†…å®¹
        data = file_object.read()
        print(data) # HI,Friends
        # å†™å…¥å†…å®¹
        file_object.write("ä½ å¥½å‘€")
        file_object.close()
        ```

        ![image-20211202092206860](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/image-20211202092206860.png){loading="lazy"}

    -   w+ã€wt+ã€wb+ï¼Œé»˜è®¤å…‰æ ‡ä½ç½®ï¼šèµ·å§‹ä½ç½®ï¼ˆæ¸…ç©ºæ–‡ä»¶ï¼‰

        ``` python
        file_object = open('demo1.txt', mode='wt+')
        # è¯»å–å†…å®¹
        data = file_object.read()
        print(data) # æ–‡ä»¶è¢«æ¸…ç©ºäº†ï¼Œè¯»å–ä¸åˆ°å†…å®¹
        # å†™å…¥å†…å®¹
        file_object.write("ä½ å¥½å‘€")
        file_object.close()
        ```

        ![image-20211202092354516](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/image-20211202092354516.png){loading="lazy"}

    -   x+ã€xt+ã€xb+ï¼Œé»˜è®¤å…‰æ ‡ä½ç½®ï¼šèµ·å§‹ä½ç½®ï¼ˆæ–°æ–‡ä»¶ï¼‰

        ``` python
        file_object = open('demo2.txt',mode='xt+')
        # å†™å…¥å†…å®¹
        file_object.write("ä½ å¥½å‘€")
        # ç§»åŠ¨æ–‡ä»¶å†…å…‰æ ‡
        p = file_object.tell()
        print(p) # 9 ç”±äºåŒä¸€æ¬¡æ–‡ä»¶æ‰“å¼€ï¼Œæ£€æŸ¥å…‰æ ‡å·²ç»è¢«ç§»åŠ¨åˆ°9çš„ä½ç½®
        file_object.seek(0) # å°†å…‰æ ‡ä»æ–°ç§»åŠ¨åˆ°æ–‡ä»¶å¼€å¤´ï¼Œæ‰èƒ½è¯»å–åˆ°åˆšå†™å…¥çš„å†…å®¹
        # è¯»å–å†…å®¹
        data = file_object.read()
        print(data) # ä½ å¥½å‘€
        file_object.close()
        ```

        ![image-20211202092524418](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/image-20211202092524418.png){loading="lazy"}

    -   a+ã€at+ã€ab+ï¼Œé»˜è®¤å…‰æ ‡ä½ç½®ï¼šæœ«å°¾

        ``` python
        file_object = open('demo2.txt',mode='at+')
        # è¯»å–å†…å®¹
        ## å…‰æ ‡ç½®äºæœ«å°¾ï¼Œæ— æ³•è¯»å–å†…å®¹
        data = file_object.read()
        print(data)
        # å†™å…¥å†…å®¹
        file_object.write("ä½ å¥½å‘€")
        file_object.close()
        ```

        ![image-20211202092739727](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/image-20211202092739727.png){loading="lazy"}

å®Œå–„å‰æ–‡æ³¨å†Œæ¡ˆä¾‹(å¤šç”¨æˆ·æ³¨å†Œç³»ç»Ÿ)ï¼š

``` python
# å¤šç”¨æˆ·æ³¨å†Œæ¡ˆä¾‹
# æ³¨å†Œæ¨¡å—
def registered():
    print("æ¬¢è¿æ¥åˆ°ç”¨æˆ·æ³¨å†Œç³»ç»Ÿ".center(25, '*'))
    user_name = input("è¯·è¾“å…¥ç”¨æˆ·å:")
    user_passwd = input("è¯·è¾“å…¥å¯†ç :")
    user = "{}-{}\n".format(user_name,user_passwd)
    user_file = open('user.txt',mode='at',encoding='utf-8')
    user_file.write(user)
    user_file.close()
# ç™»å½•æ¨¡å—
def login():
    print("è¯·ç”¨æˆ·ç™»å½•ç³»ç»Ÿ".center(25, '*'))
    user_name = input("è¯·è¾“å…¥ç”¨æˆ·å:")
    user_passwd = input("è¯·è¾“å…¥å¯†ç :")
    user_file = open('user.txt',mode='rt',encoding='utf-8')
    for user in user_file:
        username,passwd = user.strip().split("-",1)
        # æ³¨æ„ï¼Œç”±äºæ³¨å†Œæ¨¡å—å­˜å‚¨æ—¶åŠ äº†\nï¼Œæ‰€ä»¥æå–æ—¶è¦å»æ‰æ‰èƒ½å¾—åˆ°å‡†ç¡®çš„passwd
        if username == user_name and passwd == user_passwd:
            print("ç™»å½•æˆåŠŸ")
            break # å¤šç”¨æˆ·æ—¶ï¼Œæ¯”è¾ƒæˆåŠŸäº†ï¼Œå°±break
    else: # å¦‚æœæ²¡æœ‰æ¯”è¾ƒåˆ°ï¼Œå°±æ˜¾ç¤ºç™»å½•å¤±è´¥
        print("ç™»å½•å¤±è´¥")
login()
while True:
    print("è¯·ç”¨æˆ·ç³»ç»Ÿ".center(25, '*'))
    print("1.ç™»å½•")
    print("2.æ³¨å†Œ")
    print("3.é€€å‡º")
    inp = input("è¯·è¾“å…¥ï¼š")
    if not inp.isdecimal() or 0 <= int(inp) >= 3:
        # ä¸¤ä¸ªåªè¦é”™ä¸€ä¸ªå°±é‡æ–°è¾“å…¥
        print("è¾“å…¥é”™è¯¯,è¯·é‡æ–°å¦‚æ•°")
        continue
    if inp == '1':
        login()
    elif inp == '2':
        registered()
    else:
        break
```

## 2.4 æ–‡ä»¶æ“ä½œçš„å…¶ä»–åŠŸèƒ½ {#24-æ–‡ä»¶æ“ä½œçš„å…¶ä»–åŠŸèƒ½}

åœ¨ä¸Šè¿°å¯¹æ–‡ä»¶çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†writeå’Œreadæ¥å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œå…¶å®åœ¨æ–‡ä»¶æ“ä½œä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„åŠŸèƒ½æ¥è¾…åŠ©å®ç°æ›´å¥½çš„è¯»å†™æ–‡ä»¶çš„å†…å®¹ã€‚

### 2.4.1 è¯» {#241-è¯»}

readå’Œreadlinesç”±äºéƒ½ä¼šä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰çš„æ–‡ä»¶å†…å®¹ï¼Œæ‰€ä»¥å¯¹äºå†…å­˜æœ‰ä¸€å®šæº¢å‡ºçš„å±é™©

#### f.read() {#fread}

è¯»å–æ‰€æœ‰å†…å®¹,æ‰§è¡Œå®Œè¯¥æ“ä½œåï¼Œæ–‡ä»¶æŒ‡é’ˆä¼šç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾

``` python
f = open("user.txt",mode='rt',encoding='utf-8')
print(f.read(3)) # rtæŒ‡å®šå•æ¬¡è¯»å–3å­—ç¬¦(å¦‚æœæ˜¯rbæ¨¡å¼æ‰“å¼€æ˜¯3ä¸ªbytesæ•°æ®)
print(f.read()) # è¯»å–å®Œæ‰€æœ‰å†…å®¹
f.close()
```

#### f.readline() {#freadline}

è¯»å–ä¸€è¡Œå†…å®¹,å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬äºŒè¡Œé¦–éƒ¨

``` python
f = open('user.txt',mode='rt',encoding='utf-8')
print(f.readline()) # admin-admin
print(f.readline()) # kinght-ass
print(f.readline()) # asdasd-asdaaa
f.close()
```

#### f.readlines() {#freadlines}

å½“å‰æ–‡ä»¶æŒ‡é’ˆä¸ºèµ·å§‹ï¼Œè¯»å–æ¯ä¸€è¡Œå†…å®¹ï¼Œå¹¶ä¸”æŒ‰è¡Œä¸ºåˆ†å‰²ï¼Œå­˜æ”¾äºåˆ—è¡¨ä¸­

``` python
f = open('user.txt',mode='rt',encoding='utf-8')
data = f.readlines()
print(data)
# å…¨éƒ¨è¾“å‡ºï¼Œå½¢æˆåˆ—è¡¨
# ['admin-admin\n', 'kinght-ass\n', 'asdasd-asdaaa\n', 'abc-abc\n']
```

#### forå¾ªç¯è¯»å–(redlineåŠ å¼ºç‰ˆ)

forå¾ªç¯å¯ä»¥æŒ‰è¡Œè¯»å–æ‰€æœ‰çš„å†…å®¹ï¼Œå¸¸ç”¨è¯­è¯»å–å¤§æ–‡ä»¶

``` python
f = open('user.txt',mode='rt',encoding='utf-8')
for i in f:
    print(i,end="")
''' æ–‡ä»¶ä¸­æœ‰æ¢è¡Œç¬¦,æ‰€ä»¥éœ€è¦å†printçš„æ—¶å€™å–æ¶ˆæ¢è¡Œç¬¦
admin-admin
kinght-ass
asdasd-asdaaa
abc-abc
'''
```

#### ä½¿ç”¨`.read(å­—èŠ‚å¤§å°)`æ§åˆ¶å•æ¬¡è¯»å–å­—èŠ‚æ•°æ¥è¯»å–å¤§æ–‡ä»¶ {#ä½¿ç”¨readå­—èŠ‚å¤§å°æ§åˆ¶å•æ¬¡è¯»å–å­—èŠ‚æ•°æ¥è¯»å–å¤§æ–‡ä»¶}

``` python
import os

# ä½¿ç”¨os.path.getsizeè®¡ç®—æ–‡ä»¶å¤§å°
file_size = os.path.getsize("etl_log.txt.txt")

read_size = 0
with open('etl_log.txt.txt', 'rb') as file_object:
    while read_size < file_size:
    #.read(å­—èŠ‚)æ§åˆ¶æ–‡ä»¶è¯»å–å¤§å°
        data = file_object.read(1)
        read_size += len(data)
```

### 2.4.2 å†™ {#242-å†™}

ç›¸å¯¹äºè¯»ï¼Œå†™çš„å†…å®¹å°±éå¸¸å°‘ï¼Œåœ¨ä¹‹å‰å·²ç»æåˆ°è¿‡å¤§éƒ¨åˆ†

``` python
f = open("user.txt",mode='at',encoding='utf-8')
f.write("ayi-sssd")
f.close()
```

#### flush åˆ·å…¥ç¡¬ç›˜

`write`è¿›è¡Œå†™å…¥çš„æ—¶å€™ï¼Œæ–‡ä»¶ä¼šå…ˆå†™å…¥åˆ°ç³»ç»Ÿç¼“å†²åŒºä¸­ï¼Œç¼“å†²åŒºä¼šå®šæ—¶å®šé‡çš„å°†å†…å®¹åˆ·å…¥ç¡¬ç›˜

æˆ‘ä»¬å¯ä»¥æ˜¯ç”¨`flush`å°†ç¼“å†²åŒºå†…å®¹ç›´æ¥åˆ·å…¥ç¡¬ç›˜

``` python
user_file = open('user.txt',mode='at',encoding='utf-8')
while True:
    username = input('è¯·è¾“å…¥ç”¨æˆ·åï¼š')
    passwd = input('è¯·è¾“å…¥å¯†ç ï¼š')
    user = "{}-{}\n".format(username,passwd)
    user_file.write(user)
    user_file.flush() # å†™å…¥ç¡¬ç›˜
user_file.close()
```

æˆ‘ä»¬å¯ä»¥éå¸¸ç›´è§‚çš„çœ‹æ–‡ä»¶å†…å®¹ï¼Œæœ‰`user_file.flush()`åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ–‡ä»¶å°±å¯ä»¥å¾—åˆ°æ”¹å˜ï¼Œè€Œæ²¡æœ‰å°±éœ€è¦å…³é—­æ–‡ä»¶åæ‰ä¼šæ”¹å˜

#### å…‰æ ‡ä½ç½®ç§»åŠ¨

å¯¹äºå…‰æ ‡è€Œè¨€ï¼Œ`t/b`æ¨¡å¼æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå‡è®¾æ–‡å­—æ˜¯æ±‰å­—ï¼Œä¸€ä¸ªæ±‰å­—ç­‰äºä¸‰ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ï¼Œ`t`æ¨¡å¼å°±ç­‰äºä¸‰ä¸ªå­—èŠ‚ï¼Œè€Œ`b`æ¨¡å¼å°±ä¸éœ€è¦é¡¾è™‘ï¼Œç›´æ¥è¡¨ç¤º1ä¸ªå­—èŠ‚

``` python
f = open('user.txt',mode='r+t',encoding='utf-8')
# seek() ç§»åŠ¨åˆ°å¤šå°‘å­—èŠ‚(æ— è®ºæ¨¡å¼éƒ½æ˜¯å­—èŠ‚ï¼Œä¸­æ–‡å°±æ˜¯ä¸€ä¸ªæ±‰å­—ä¸‰ä¸ªå­—èŠ‚)
f.seek(4) # admin-admin ç§»åŠ¨åˆ°ç¬¬4ä¸ªå­—èŠ‚
print(f.readline()) # n-admin # è¯»å–å½“å‰è¡Œ

f.seek(4) # å›åˆ°ç¬¬4ä¸ªå­—èŠ‚
f.write('ä½ å¥½å‘€') # è¦†ç›–ä¿®æ”¹äº†å¾€åçš„9ä¸ªå­—ç¬¦

f.seek(0) # å°†å…‰æ ‡ç§»åŠ¨åˆ°æ–‡ä»¶å¼€å¤´
print(f.readline()) # admiä½ å¥½å‘€inght-ass
f.close()
```

å¦‚æœæŸä¸ªå­—ç¬¦æ˜¯3ä½ï¼Œå–çš„æ—¶å€™è¢«æˆªæ–­äº†ï¼Œå°±å¯èƒ½æŠ¥é”™

``` python
f = open('user.txt',mode='r+t',encoding='utf-8')
# æ±‰å­—æ˜¯ä¸‰ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯è¢«æˆªæ–­äº†å°±å¯èƒ½ä¹±ç 
f.seek(5) # å…‰æ ‡5-7æ˜¯æ±‰å­—ä½ ï¼Œè¿™é‡Œç›´æ¥å°†å…‰æ ‡ç§»åŠ¨åˆ°æ±‰å­—å†…éƒ¨
print(f.readline())
f.close()
```

![image-20211208173448452](https://skystarry-1251157247.cos.ap-chengdu.myqcloud.com/img/image-20211208173448452.png){loading="lazy"}

éœ€è¦æ³¨æ„çš„æ˜¯ï¼š`a`æ¨¡å¼çš„åˆå§‹å…‰æ ‡åœ¨æœ€åæ–¹

``` python
f = open('ä¸­æ–‡.txt',mode='a+t',encoding='utf-8')
print(f.tell()) # 517
f.seek(0)
f.read(3) # è¿™é‡Œæ˜¯ä¸­æ–‡ï¼Œæ‰€ä»¥tæ¨¡å¼æ˜¯ç§»åŠ¨9ä¸ªå­—ç¬¦
print(f.tell()) # 9
f.close()
```

#### è¡¥å……çŸ¥è¯† - é‡å‘½å

``` python
import shutil
# ha.conf_1é‡å‘½åä¸ºha.conf ä¸”å¦‚æœå­˜åœ¨å°±è¦†ç›–ha.conf
shutil.move('ha.conf_1','ha.conf')
```

## 2.5 ä¸Šä¸‹æ–‡ç®¡ç†(æ¨èä½¿ç”¨) {#25-ä¸Šä¸‹æ–‡ç®¡ç†æ¨èä½¿ç”¨}

ä¹‹æ‰€ä»¥ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œæ˜¯å› ä¸ºåœ¨æ“ä½œæ–‡ä»¶çš„æ—¶å€™ä¼šå ç”¨å†…å­˜ï¼Œè€Œæ–‡ä»¶ä¸å…³é—­æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œæ‰€ä»¥å°±å¯èƒ½å¯¼è‡´å¿˜è®°å…³é—­æ–‡ä»¶è€Œå¯¼è‡´å†…å­˜ä¸å¤Ÿç”¨çš„æƒ…å†µå‘ç”Ÿ

``` python
with open('ä¸­æ–‡.txt',mode='rt',encoding='utf-8') as f:
    data = f.readline()
    print(data)
    # æ–‡ä»¶åªåœ¨ç¼©è¿›ä¸­æ‰“å¼€ï¼Œç¼©è¿›ä¹‹å¤–è‡ªåŠ¨å…³é—­
# f.readline() # æç¤ºæ–‡ä»¶å·²è¢«å…³é—­
```

åœ¨python2.7ä¹‹åï¼Œæ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶

``` python
# ä¸¤ä¸ªopenæœ¬åº”è¯¥å†™åœ¨ä¸€æ’ä¸­ï¼Œä½¿ç”¨\è®©ä»–ä»¬åˆ†å‰²æˆä¸¤æ’ï¼Œä½†å…¶å®å¯¹äºç¨‹åºæ˜¯ä¸€æ’
with open('ä¸­æ–‡.txt',mode='rt',encoding='utf-8') as f,\
        open('user.txt',mode='rt',encoding='utf-8') as b:
    pass
```